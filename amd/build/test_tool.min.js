define("mod_etherpadlite/test_tool",["exports","core/modal","core/notification","core/templates","core/ajax","core/str"],(function(_exports,_modal,_notification,_templates,_ajax,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Test tool for checking the connection and credentials of a given Etherpad Lite API-URL and API-key.
   *
   * @module     mod_etherpadlite/test_tool
   * @copyright  2025 Andr√© Menrath <andre.menrath@uni-graz.at>, University of Graz
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.getTestResults=void 0,_modal=_interopRequireDefault(_modal),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates);const SELECTORS_SETTING_ETHERPAD_URL="url",SELECTORS_SETTING_ETHERPAD_APIKEY="apikey",SELECTORS_TEST_TOOL_BUTTON='[data-action="mod-etherpadlite-test-tool"]';_exports.init=()=>{"/admin/settings.php"===window.location.pathname&&registerListenerEvents()};const registerListenerEvents=()=>{const testButton=document.querySelector(SELECTORS_TEST_TOOL_BUTTON);testButton&&(testButton.addEventListener("click",(event=>{event.preventDefault(),testConnection().catch(_notification.default.exception)})),testButton.hasAttribute("disabled")&&testButton.removeAttribute("disabled"),testButton.classList.contains("disabled")&&testButton.classList.remove("disabled"))},getTestResults=(url,apikey)=>(0,_ajax.call)([{methodname:"mod_etherpadlite_test_tool",args:{url:url,apikey:apikey}}])[0];_exports.getTestResults=getTestResults;const getAdminSettingValue=setting=>{const settingElementId="admin-"+setting,input=document.getElementById(settingElementId).querySelector("input");return input?input.value:null},testConnection=async()=>{const url=getAdminSettingValue(SELECTORS_SETTING_ETHERPAD_URL),apikey=getAdminSettingValue(SELECTORS_SETTING_ETHERPAD_APIKEY),testResult=await getTestResults(url,apikey);(await _modal.default.create({title:(0,_str.getString)("testmodaltitle","mod_etherpadlite"),body:_templates.default.render("mod_etherpadlite/test_tool_result",testResult),large:!0,isVerticallyCentered:!0,buttons:{cancel:(0,_str.getString)("closebuttontitle","moodle")}})).show()}}));

//# sourceMappingURL=test_tool.min.js.map